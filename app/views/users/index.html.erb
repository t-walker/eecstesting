<div class="row">
  <div class="col-md-6">
    <table class="table" style="color: black;">
      <tr>
        <th>Name</th>
        <th>E-mail</th>
        <% if current_user.advisor? || current_user.admin? %>
          <th>Change Advisor</th>
        <% end %>
        <% if current_user.admin? %>
          <th>Change Admin</th>
        <% end %>
      </tr>
      <% @users.each do |u| %>
      <tr>
        <td><%= u.firstname %> <%= u.lastname %></td>
        <td><%= u.email %></td>
        <% if !u.admin? && !u.advisor? %>
        <td><%= button_to "Make Advisor", make_advisor_path(id: u.id) , method: :put, class: "btn btn-primary btn-block" %></td>
        <% elsif !u.advisor? && u.admin? %>
        <td><%= button_to "Make Advisor", make_admin_path(id: u.id) , method: :put, class: "btn btn-primary btn-block", disabled: true%></td>
        <% else %>
        <td><%= button_to "Remove Advisor", remove_advisor_path(id: u.id) , method: :put, class: "btn btn-danger btn-block" %></td>
        <% end %>
        <% if current_user.admin? %>
          <% if !u.admin? && !u.advisor? %>
          <td><%= button_to "Make Admin", make_admin_path(id: u.id) , method: :put, class: "btn btn-primary btn-block" %></td>
          <% elsif !u.admin? && u.advisor? %>
          <td><%= button_to "Make Admin", make_admin_path(id: u.id) , method: :put, class: "btn btn-primary btn-block", disabled: true%></td>
          <% else %>
          <td><%= button_to "Remove Admin", remove_admin_path(id: u.id) , method: :put, class: "btn btn-danger btn-block" %></td>
          <% end %>
        <% end %>
      </tr>
      <% end %>
    </table>
  <%= link_to 'Download User data as CSV', users_path(format: :csv) %>
  </div>
  <div class="col-md-6">
    <div class="panel panel-default" style="vertical-align: text-bottom;">
      <h4 style="text-align: center; padding-top: 20px; margin-bottom: 0px;">Users Registered by Date</h4>
      <%= area_chart User.group_by_day(:created_at, format: "%b %d %Y").count, {library: {legend: 'none',
                                                                       titlePosition: 'none',
                                                                       hAxis: {title: "Date"},
                                                                       vAxis: {title: "# of Users Registered"}}, discrete: true} %>
    </div>
  </div>
</div>
